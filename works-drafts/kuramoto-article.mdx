# Introduction

In light of the recent COVID-19 pandemic, researching and building services that enable better communication over the internet is more relevant than ever. Conducting synchronous musical activity is a particularly challenging aspect of online communication, often referred to as Networked Music Performances (NMP). The greatest antagonist to any successful NMP is latency, often induced by physical distance, sub-optimal hardware and software peripherals, or networking issues. For performers, the most notable effect of latency is how quickly it breaks down the perception of simultaneity in an ensemble. When the latency is too great, ensembles cannot play together in time.

The current body of music research offers various contributions for coping with latency and synchronization issues in NMPs. Studies on how to improve tempo and metronome accuracy have yielded important results in this regard. These technologies are often small, computationally cheap, and can have democratizing effects by extending the accepted range of simultaneity in networked ensembles and allowing for less advanced technical setups. A great example of this is the global GPS metronome proposed by Reid and Fiebrink, a device that can provide near-perfect clock synchronization in NMPs regardless of physical proximity. Others have explored more adaptive approaches, such as tempo-tracking and virtual conductors, that often modify tempo in real-time to compensate for jitter, network drops, and more.

However, few have explored adaptive metronome strategies specifically for NMP structures with more than two clients. Also, the literature shows little experimentation with coupled networked nodes or the concept of interconnectedness and how this can contribute to NMP ensemble accuracy.

# The Kuramoto Model

Synchronization, sometimes referred to as entrainment, is a natural process that can be defined as an interaction between independent rhythmical processes or the adjustment of rhythms of oscillating objects due to their weak interaction. The result of synchronization is a transition to phase equality for all oscillators at a rate described by the extent of their interaction, or coupling strength.

The Kuramoto model is a simple and well-known mathematical model for the synchronization of globally coupled non-linear oscillators, developed by Yoshiki Kuramoto in the 1970s.

In the governing equation, synchronization occurs by the sine of the differences between the phases of all oscillating bodies _N_ in the system. The strength of the interaction between the oscillators is determined by the coupling constant _k_, a parameter that also controls the rate of synchronization.

Perhaps the most notable feature of Kuramoto's equation is that it provides a direct method for finding the critical coupling strength for any system of oscillators, that is the exact threshold where synchrony begins to occur.

In research, the model has been used for a variety of different applications other than mathematics, such as for the study of interpersonal and social synchronization tendencies, the exploration of musical sonification strategies, and much more. However, there's little studies on how the Kuramoto model can be utilized to improve tempo synchronization for musical ensembles.

# Hypothesis

The main motivation for the study lies in the adaptive mechanisms of the Kuramoto equation, specifically that a synchronized system of oscillators will naturally try to equalize, or compensate for, any individual phase variations by deviating from the synchronized state. This paper presents a preliminary exploration into how we can use these mechanisms as an adaptive metronome strategy for NMPs, testing whether The Kuramoto model has the potential to improve tempo synchronization in larger NMP structures. Also, by experimenting with different coupling strengths, the study aims to gain an understanding of the relationship between coupling strengths and synchronization accuracy.

# Evaluation

This section provides descriptions of the software and experiment designs used to investigate the hypothesis. In the end, a brief account of the data collection process is presented.

## Software design

Considering the Kuramoto equation governs the synchronization of oscillators, it lends itself well to the audio domain. Therefore, software was written in the Max8 programming environment that produced a scalable, user-friendly, and audio-rate version of the Kuramoto model.

Since we can understand synchronization to be phase equality between oscillators, the software was designed to synchronize client oscillators to a server oscillator by adjusting phases using the Kuramoto model, as illustrated in Figure 2. With this design, each client would only need to provide an audio oscillator to the server which would be synchronized before being sent back for metronome playback.

In the software, the Kuramoto equation is slightly modified to better accommodate the audio domain and experiment design. First, all coupling constants _K_ were normalized between 0 and 1 and scaled to the audio sampling rate of the system _S_, rather than to the number of oscillators _N_ as in the original equation. Second, for simplicity reasons, the frequency component was removed from the equation since all nodes use the same frequency to drive their metronomes to achieve the same BPM (120).

Finally, to translate oscillation to audible musical tempo, a phase-driven metronome was created where there was a direct relationship between the oscillator phase and the metronome audio playback, such that one phase revolution equaled one audio tick played at phase = 0. This ensured that the metronomes remained isochronic in response to phase adjustments resulting only in desired temporal shifts of the metronome - an important feature when considering the experiment design.

## Experiment Design

Two experiments were conducted to enable a comparison that would best isolate the effect of the Kuramoto model on tempo synchronization between multiple NMP clients. For both experiments, a virtual NMP environment was created on a laptop where two clients and one server (3 nodes) were interconnected in star-like networking typology, as illustrated in Figure 4. To measure the effectiveness of the model, the metronome ticks were recorded on an external machine for comparison.

Each experiment consisted of various iterations that lasted for 30 minutes. During each iteration, client nr.2 was affected by a controlled amount of emulated network jitter. Every 20 seconds, a new offset was provided to the clock oscillator of client nr.2, resulting in a consistent but varied temporal shift of the ticks. For consistency, the same offsets were used for all experiments, in the same order.

The two experiments differed only in their coupling strategy. In the _coupled experiment_, both clients were synchronized to the master by the same instance of the software Kuramoto model, effectively coupling the clients to each other, as illustrated in Figure 4. Ten iterations of the coupled experiment were recorded, each with a unique _K_-value for the Kuramoto model.

In the _de-coupled experiment_, the clients were synchronized to the master through unique instances of the software Kuramoto model, effectively de-coupling the clients from each other, as illustrated in Figure something. Only one iteration of the de-coupled experiment was recorded with a maximum coupling strength of \textit{K}=1, functioning as a control experiment for the study.

## Data Collection

After recording the metronomes from each node in every experiment iteration, the tick sample positions were located before offsets were calculated. Last, some additional processing was done to clean the data before analysis.

For the analysis, the average distance (milliseconds) between the metronome ticks was measured, in addition to the average distance between the clients and the server ticks. Considering that all audio files were equal in length, these calculations were only based on non-zero offsets to avoid longer or shorter deviations impacting the analysis. The resulting mean values helped to understand the average temporal distance between the nodes over a longer duration. In short, if these values are low, the nodes are temporally closer together, meaning synchronization is better. Second, the standard deviation was calculated for the same constellations. The standard deviations helped to understand the deviation dispersion and provided insights into the stability of offsets over time.

# Results

As seen in Figure 6, two things are immediately evident when comparing the results from the de-coupled and coupled experiment(s) with corresponding coupling constants. The first is that the average offset between both clients is less in the coupled experiment with _K_=1. When in a coupled state, unaffected nodes (client nr.1) adapt to affected nodes (client nr.2) by reducing the relative distance between them. Second, the average distance between client nr.2 and the server is also lower in the coupled experiment. Together, the effects of using a coupled over a de-coupled strategy amount to a 65.64% reduction in the latency between the clients, and a 13.85% reduction between client nr.2 and the server.

Further results highlight the impact of coupling constants, or coupling strengths, on these synchronization effects. As depicted in Figure 7, there seems to be a tendency for the average offset between clients to increase with weaker coupling strengths, despite the optimal _K_-value proving to be 0.9 in this case, and not 1. In addition, using lower coupling constants increased the relative distance between all clients and the server, affected and unaffected alike, further indicating that greater coupling strengths have several positive effects on synchronization accuracy.

Last, by inspecting the "mean difference between clients" trajectory in Figure 8, and the "difference between client 1 and 2" in Figure 8, we see that the mean offset between clients is higher when using a coupled strategy with _k_ less than 0.3, than using a de-coupled strategy with _K_=1. This also holds for the standard deviation between clients, which begins to favor de-coupling at _K_ less than 0.4, and the mean offset between client nr.2 and the server which favors de-coupling at _k_ less than 0.6. These results show that a de-coupled strategy would actually render better synchronization accuracy for systems where the coupling strength is below certain thresholds.

Similarly, in Figure 9 we see a cross-section in the trajectory of the two datasets ("mean difference between client 1 and server" and the "mean difference between client 1 and 2") just below _k_=0.3, indicating that it might only be favorable to utilize a coupled strategy when the offset (ms) between clients is less than the distance between unaffected clients and the server.

# Discussion

The preliminary results were positive, showing that the model exhibited desired adaptive qualities that can contribute to minimizing the relative temporal distance between nodes in unstable NMP contexts. In addition, the experiment produced valuable insights into the relationship between coupling strength and synchronization accuracy suggesting that there might be a connection between the relative distance between coupled nodes and the most effective coupling strategy.

Further investigating these findings could benefit real-life dynamic audio applications that rely on the Kuramoto model for accuracy by improving their responses to varying conditions. However, the most realistic application for the system presented is likely to be an additional component of existing strategies for tempo synchronization in NMPs. In this context, the model could provide an automatic skewing mechanism to compensate for drift and misalignment over time, similar to the mechanisms found in NTP and PTP protocols for network clock synchronization. The real power of using the Kuramoto algorithm for digital musical synchronization is that it provides a simple, low-overhead, and robust way of managing synchronization for large groups of oscillators that is highly scalable and easily controlled.

Moreover, it is debatable whether the software version presented in this paper could mitigate real-life network conditions. The effect of network jitter on audio transmissions is very different and much more radical than what was presented in these experiments. That being said, it is worth clarifying that the study did not aim to measure the effect of the model in any real networking scenario. Instead, the goal was to verify if the model mitigated oscillator phase deviations in a specific manner and, by extension, to show that this behavior could benefit tempo synchronization in networked musical contexts.

Finally, the study operates under the premise that we understand an increase in tempo synchronization to occur when the latency between NMP client metronomes is reduced. This premise presupposes that NMP performers are willing to trade some tempo stability for greater synchrony with their peers. However, this may not universally be the case, as studies are inconclusive regarding the advantage of using adaptive over more conventional metronome strategies in NMP scenarios.

# Conclusion

Conducting synchronous musical activity is a particularly challenging aspect of online communication. Latency and other technical caveats often break down the perception of simultaneity in NMP ensembles, rendering the interaction incapable of meeting the high temporal and qualitative demands for successful musicking.

This paper has investigated how we can use The Kuramoto model as an adaptive metronome technique for NMPs, assessing whether its adaptive mechanisms have the potential to contribute to greater timing accuracy between clients in larger NMP structures. To isolate the effect of the algorithm, two experiments with different coupling strategies were carried out on a novel software implementation of the Kuramoto model. Both experiments were conducted in a virtual NMP environment where two clients were synchronized to a master by the Kuramoto model. Also, a range of coupling strengths were tested to better understand the relationship between coupling strength and synchronization accuracy.

The results suggest that there is potential for the Kuramoto model to improve tempo synchronization in NMPs with more than one client, verifying that the algorithm exhibits certain desired adaptive qualities that can contribute to minimizing the relative temporal distance between nodes in unstable contexts. Additional findings indicate that there might be a connection between the distance between coupled nodes and the most effective coupling strategy for tempo synchronization. However, more research is needed to further explore the role of ensemble size and coupling strengths on synchronization accuracy and to determine if and how the model can contribute to real-life networked context.

# Future Work

Future work on the topic covered in this paper should focus on two key aspects.

First, more research is needed to see how the model performs in real networked contexts. One way to test this could be to make appropriate adjustments to the software and document its performance in a controlled network environment, such as a LAN or private VLAN, with additional network-emulating software. Another interesting approach would be to test if and how the system could be implemented into existing adaptive metronome systems for NMPs.

Second, more testing is needed to understand how the number of clients and coupling strengths relate to coupling strategies and, by extension, synchronization accuracy. It would also be interesting to experiment with other network typologies and configurations, like full mesh, for comparison purposes.
