---
title: "A Digital Symphonic Poem"
date: "2023-11-25"
keywords:
  [
    "kuramoto",
    "audio",
    "programming",
    "art",
    "max",
    "software",
    "synchronization",
    "realtime",
    "mapping",
    "machine-learning",
    "data",
    "digital",
    "flucoma",
  ]
type: "work"
summary: "Celebrating the 100th birthday of modernist composer György Ligeti, I designed a digital system to perform one of his most renowned pieces, Poème Symphonique for 100 metronomes, using MaxMSP and machine learning tools for realtime audio processing."
---

!!BILDE!!

Sometime in fall 2022, I found myself talking to a colleague and friend of mine, Dr.Peter Edwards, about modernist composer György Ligeti's upcoming 100-year birthday in 2023. Soon, we discovered that we had a mutual interest in his fantastic composition for 100 mechanical metronomes, called _Poème Symphonique_. As we started to talk about the prospect of setting up the piece, I was amazed to learn how expensive it is to buy 100 mechanical metronomes. Therefore, not surprisingly, our talk ended with us questioning whether it would be possible to digitally model the piece and the synchronization behavior that goes on between the metronomes on stage.

I found this idea so interesting that I spent a lot of time after my conversation with Peter researching algorithms and models that could produce this desired synchronization behavior in the digital realm. Eventually, my curiosity led me to design my own system that can perform a version of Poème Symphonique on demand, using some custom-built MaxMSP (Max) software together with state-of-the-art machine-learning tools for realtime audio processing.

This post shares my process of creating a software version of Poème Symphonique, a Poème Symphonique Numérique. After some backstory, the post details the software development and the final execution of my project, ending with some concluding remarks and relevant articles.

# Content

1. <MyLink href="#">Poème Symphonique</MyLink>
2. <MyLink href="#">Synchronizing Sounds With The Kuramoto Model</MyLink>
3. <MyLink href="#">Bringing The Kuramoto Model To Max</MyLink>
4. <MyLink href="#">Building a Corpus Of Metronome Ticks</MyLink>
5. <MyLink href="#">Un Poème Symphonique Numérique</MyLink>
6. <MyLink href="#">References and Further Reading</MyLink>

---

# Poème Symphonique

György Ligeti is one of the great modernist European composers, born in 1923 in Hungary. Ligeti was especially renowned for his sound-texture explorations and "klangflate" work. In fact, if you've seen Stanley Kubrick's sci-fi epic, 2001: A Space Odyssey, then you have heard some of Ligeti's music before. In the film, the alien monoliths are sonically themed by one of Ligeti's great modernist choir pieces, namely <MyLink hef="https://en.wikipedia.org/wiki/Lux_Aeterna_(Ligeti)">Lux Aeterna</MyLink>.

Poème Symphonique is an earlier piece by Ligeti, composed in 1962, for 100 mechanical metronomes. On stage, the metronomes are split into equally sized groups and placed on solid resonator surfaces, like tabletops. Then, the metronomes are wound to their maximum capabilities and given a tempo between 50 and 144 BPM. The piece is performed by starting the metronomes at arbitrary times and lasts until the metronomes have run out of mechanical energy.

<MySpotifyPlayer
  embedUrl="https://www.youtube.com/embed/-mUv705xj3U?si=QQvVgL3Wvb7NsotA"
  caption=""
/>

The unique thing about Poème Symphonique is the synchronization phenomenon that happens within the metronome groups. Since they share a common resonator (the tabletop), the metronomes are _coupled_, meaning that their behavior is directly affected by the behavior of their coupled partners. The effect is that the interacting metronomes synchronize to different rhythmical patterns over time.

I think the piece says something important about our perception of music. It's also an interesting reminder of the fascinating properties of oscillations and rhythm in the natural world.

Synchronizing Sounds With The Kuramoto Model

# The Kuramoto Model And Its Use in Music Research

Synchronization can be defined as an interaction between independent rhythmical processes. It's a natural process we observe everywhere, from the light pulses of large groups of fireflies to musical ensembles reaching a state of rhythmical unity. Technically speaking, the result of synchronization is a transition to phase equality (θ ≡ θ) for all oscillators in a system at a rate described by how much they are interacting/coupled.

<MyImage src="digital-symphonic-poem-in-sync.png" height="100" />

The <MyLink href="https://handwiki.org/wiki/Kuramoto_model">Kuramoto model</MyLink> is a simple and well-known mathematical framework for understanding synchronization in globally coupled non-linear oscillators, developed by Yoshiki Kuramoto in the 1970s. In simple terms, the model describes how groups of interacting oscillators synchronize, just like what we experience with Ligeti's metronomes and the fireflies. I was first introduced to this algorithm online through a great video by Matt Parker on <MyLink href="https://www.youtube.com/watch?v=J4PO7NbdKXg"> Syncronizing Metronomes in a Spreadsheet</MyLink>.

In the governing Kuramoto equation, the phase (θ) of an oscillator is extracted by calculating the difference between it and all oscillators (_N_) in the system, then taking the sine of the result. Also, the fundamental frequency (ω) of the oscillator must be added. The strength of the interaction between the oscillators is determined by the coupling constant (_K_), a parameter that also controls the rate of synchronization.

<MyImage
  src="digital-symphonic-poem-kuramoto-model.png"
  width="400"
  caption="The governing Kuramoto equation"
/>

Kuramoto-like models have had a significant impact on a variety of scientific fields, including music. A big part of this research revolvs around new complex forms of synthesis, studying how we can derive complex behavior from simple oscillator systems, experimenting with generative synthesis, sonification applications, and even waveshaping.

Musical rythmn studies is another area of research where Kuramoto-like models have been put to use (of course). Here, the rhymic synchronization capabilities of the models are at the center. For instance, some of these studies experiment with new self-organizing rhythmical systems, while others seek to develop intelligent systems that can enable better musicking between humans and machines/robots. If you want to learn more about this topic, I made a reference list of relevant papers and articles at the bottom for your reading pleasure.

When designing software to perform Poème Symphonique, the Kuramoto Model seemed like a perfect place for me to start.

# Bringing The Kuramoto Model To Max

I decided to use MaxMSP (Max) as my primary programming environment for the project as I wanted to work exclusively with oscillators in the audio domain Also, to perform Poème Symphonique the way I intended, I started my development process by formulating a set of requirements for my Kuramoto model software implementation:

1. The software should support an arbitrary number of oscillators, meaning it should be equally simple to use with 2 oscillators as with 200 (multi-channel).

2. The user should be able to toggle each oscillator on/off at arbitrary times, mimicking how you start and stop a mechanical metronome.

3. The user should also be able to change the oscillator frequencies and adjust the coupling constant (K-value) at arbitrary times.

4. To make the software more user-friendly, only one shared K-value for all oscillators should be avaliable for the whole system. Also, setting a K-value equal to 0 should bypass the Kuramoto effect and return the oscillator phases their original state.

5. Finally, to make the object more maintainable, the implementation should be 100% Max-native, meaning no third-party dependencies.

When searching for similar Max implementations of the Kuramoto Model, I came across several candidates I could use for my project. Most notable was the <MyLink href="https://github.com/nolanlem/Kuroscillators">Kuroscillator objects</MyLink>, developed by Nolan Lem in Fause for Max. Although Nolan's implementation is elegant and supports both synthesis and rhythm synchronization(!), I could not use it for my project as it did not fulfill a necessary amount of my requirements. Instead, I had to build my own version.

<MyImage src="aleks-ksync.png" />

The result of my development process was [aleks.ksync], a multi-channel Max abstraction that fulfills all my requirements and i 100% Max-native.

Cannot take full credit. got help av

The object has 3 inputs, one for K-value, one for the oscillator states (on/off), and one for the oscillator frequencies. Once oscillators are toggled, the object outputs sine waves in the corresponding channel at the frequency described by the second inlet.

To make the
At the core of my implementation lies a
to which all other oscillators phases are measured against. This gives me a referance.

The kuramoto model is ..
scale with sampling rate
a closer look at the codebox will reveal.
primary oscillator that creates offset seeds.

<MySlideshow
  imgs={[
    "digital-symphonic-poem-ksync-under-the-hood.png",
    "digital-symphonic-poem-ksync-under-the-hood-diagram.png",
  ]}
  captions={[
    "Under the hood of alek.ksync.",
    "a diagram illustrating the mechanics of ksync_node mc.gen code, where the kuramoto model offset are calculated and added to each oscillator.",
  ]}
/>

To produce sound, the sine-waves are
sound production happens at the 0 crossing.

# Building a Corpus of Metronome Ticks

# Un Poème Symphonique Numérique

# References and Further Reading

- Chakraborty, S., Dutta, S. & Timoney, J. The Cyborg Philharmonic: Synchronizing interactive musical performances between humans and machines. Humanit Soc Sci Commun 8, 74 (2021)

* Dörfler, F., & Bullo, F. (2014). Synchronization in complex networks of phase oscillators: A survey. Automatica, 50(6), 1539–1564. https://doi.org/10.1016/j.automatica.2014.04.012

* Daniels, B. (2005). Synchronization of Globally Coupled Nonlinear Oscillators: The Rich Behavior of the Kuramoto Model. ResearchGate. https://www.researchgate.net/publication/251888882_Synchronization_of_Globally_Coupled_Nonlinear_Oscillators_the_Rich_Behavior_of_the_Kuramoto_Model

- Essl, Georg. "Circle maps as simple oscillators for complex behavior: I. Basics." ICMC. 2006.

- Essl, Georg. "Circle maps as a simple oscillators for complex behavior: Ii. experiments." Proc. of the 9th Int. Conf. on Digital Audio Effects (DAfX-06). 2006.

- Essl, Georg. "Iterative phase functions on the circle and their projections: Connecting circle maps, waveshaping, and phase modulation." Perception, Representations, Image, Sound, Music: 14th International Symposium, CMMR 2019, Marseille, France, October 14–18, 2019, Revised Selected Papers 14. Springer International Publishing, 2021.

- Nolan Lem ‘Constructive Accumulation: A Look at Self-Organizing Strategies for Aggregating Temporal Events
  along the Rhythm Timbre Continuum’. Sound and Music Computing Conference. Saint Etienne, France 2022.

* Lem, N. (n.d.). Sound in Multiples: Synchrony and Interaction Design using Coupled-Oscillator Networks.

* Lem, N. (n.d.). The `Collective Rhythms Toolbox": An audio-visual interface for coupled-oscillator rhythmic generation.

- Lem, N., & Orlarey, Y. (n.d.). Kuroscillator: A Max-MSP Object for Sound Synthesis using Coupled-Oscillator Networks.

* Lem, N., & Fujioka, T. (2023). Individual differences of limitation to extract beat from Kuramoto coupled oscillators: Transition from beat-based tapping to frequent tapping with weaker coupling. PLOS ONE, 18(10), e0292059. https://doi.org/10.1371/journal.pone.0292059

* Maes, P.-J., Lorenzoni, V., & Six, J. (2019). The SoundBike: Musical sonification strategies to enhance cyclists’ spontaneous synchronization to external music. Journal on Multimodal User Interfaces, 13(3), 155–166. https://doi.org/10.1007/s12193-018-0279-x
